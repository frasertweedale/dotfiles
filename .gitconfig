[user]
	name = Fraser Tweedale
	email = frase@frase.id.au
[push]
	default = upstream
[alias]
	co = checkout
	ci = commit
	st = status
	rank = shortlog -esn --no-merges
	fa = fetch --all
	graph = log --graph --oneline
	g = !git graph
	ga = !git graph --all
	diffi = diff --cached
	ff = merge --ff-only
	sub = submodule
	stat = diff --stat
	stati = diff --cached --stat
	tmerge = merge --no-ff
	pushup = "!f() { git push --set-upstream $1 $(git symbolic-ref --short HEAD); }; f"
	ri = "!f() { \n\
			BASE=\"$1\" \n\
			git rev-parse --verify --quiet \"$1\" || BASE=\"HEAD~$1\" \n\
			shift \n\
			git rebase --interactive \"$BASE\" \"$@\" \n\
		}; f"
	gerrit = "!f() { \n\
			ACTION=$1 \n\
			BRANCH=$2 \n\
			shift 2 \n\
			RECEIVEPACK=\"\" \n\
			for REVIEWER in \"$@\"; do RECEIVEPACK=\"$RECEIVEPACK --reviewer '$REVIEWER'\"; done \n\
			if [ -n \"$RECEIVEPACK\" ] \n\
			then \n\
				git push \"--receive-pack=git receive-pack $RECEIVEPACK\" gerrit HEAD:refs/$ACTION/$BRANCH \n\
			else \n\
				git push gerrit HEAD:refs/$ACTION/$BRANCH \n\
			fi \n\
		}; f"
	draft = "!g() { git gerrit drafts \"$@\"; }; g"
	publish = "!g() { git gerrit publish \"$@\"; }; g"
	foreach = "!f() { \n\
			BRANCH=$(git symbolic-ref --short HEAD) \n\
			REVS=$1 \n\
			shift \n\
			for REV in $(git rev-list --reverse \"$REVS\") \n\
			do \n\
				git checkout \"$REV\" \n\
				sh -c \"$*\" \n\
			done \n\
			git checkout \"$BRANCH\" \n\
		}; f"
	fp = "!f() { \n\
			PROJECT=$(basename $(git rev-parse --show-toplevel)) \n\
			BASE=\"$1\" \n\
			git rev-parse --verify --quiet \"$1\" || BASE=\"HEAD~$1\" \n\
			START_NUMBER=$2 \n\
			for PATCH in $(git format-patch -M -C --patience --full-index --start-number \"$START_NUMBER\" \"$BASE..\") \n\
			do \n\
				SEQ=$(echo $PATCH | cut -d \"-\" -f 1) \n\
				SUMMARY=$(echo $PATCH | cut -d \"-\" -f 2-) \n\
				[ -z \"$3\" ] && VERSION=\"\" || VERSION=\"-$3\" \n\
				mv $PATCH $PROJECT-$LOGNAME-$SEQ$VERSION-$SUMMARY \n\
			done \n\
		}; f"
	frankenstash = "!f() { \n\
			touch $(git rev-parse --git-dir)/logs/refs/stash \n\
			git update-ref refs/stash $1 \n\
		}; f"
	review-pr = "!f() { \n\
		git fetch github pull/$1/head \n\
		git checkout -b pull/$1 FETCH_HEAD \n\
	}; f"
[color]
	diff = auto
[log]
	decorate = short
[rerere]
	enabled = true
[rebase]
	autostash = true
	autosquash = true
[diff]
	algorithm = patience
